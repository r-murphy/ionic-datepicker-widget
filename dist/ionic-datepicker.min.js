/*!
 * Created by Rajeshwar Patlolla https://github.com/rajeshwarpatlolla
 * Modified by Marko MarkoviÄ‡ <okram@civokram.com>
 * Modified by Sven Homburg <homburgs@gmail.com>
 *
 * @version 1.2.0
 */
"use strict";angular.module("ionic-datepicker",["ionic","ionic-datepicker.template"]).directive("ionicDatepicker",["$ionicPopup",function(e){return{restrict:"AE",replace:!0,scope:{value:"=",weekBeginsOnMonday:"=?",min:"=?",max:"=?",weekDayNames:"=?",monthNames:"=?",todayText:"=?",leaveCancelButton:"=?",leaveOkButton:"=?",title:"=?"},link:function(t,a){var i=angular.copy(t.value)||new Date;t.highlightedDate=angular.copy(i),t.weekDays=t.weekDayNames||["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],t.weekBeginsOnMonday&&t.weekDays.push(t.weekDays.shift());var n=t.monthNames||["January","February","March","April","May","June","July","August","September","October","November","December"];t.calendarRows=new Array(6),t.calendarCols=new Array(7);var r=function(e){t.dayList=[];for(var a=new Date(e.getFullYear(),e.getMonth(),1).getDate(),i=new Date(e.getFullYear(),e.getMonth()+1,0).getDate(),r=a;i>=r;r++){var o=new Date(e.getFullYear(),e.getMonth(),r);t.dayList.push({date:o,day:o.getDate()})}a=t.dayList[0].date.getDay(),t.weekBeginsOnMonday&&a--;for(var d=0;a>d;d++)t.dayList.unshift(void 0);t.currentMonth=n[e.getMonth()],t.currentYear=e.getFullYear()};t.prevMonth=function(){var e=new Date(i.getFullYear(),i.getMonth(),0);void 0!==t.min&&e<t.min||(i.setMonth(i.getMonth()-1),r(i))},t.nextMonth=function(){var e=new Date(i.getFullYear(),i.getMonth()+1,1);void 0!==t.max&&e>t.max||(i.setMonth(i.getMonth()+1),r(i))},t.highlightDate=function(e){if("undefined"!=typeof e){if(void 0!==t.min&&e<t.min)return;if(void 0!==t.max&&e>t.max)return;t.highlightedDate=angular.copy(e),i=e,r(i),t.leaveOkButton&&(t.value=t.highlightedDate,t.datePickerPopup.close())}},t.isValidDay=function(e,a){var i=t.dayList[7*e+a];return"undefined"!=typeof i},t.isSelected=function(e,a){if(t.isValidDay(e,a)){var i=t.dayList[7*e+a];return i.date.toDateString()===t.highlightedDate.toDateString()}return!1},t.isToday=function(e,a){return t.isValidDay(e,a)?t.dayList[7*e+a].date.toDateString()===(new Date).toDateString():!1},t.isDisabled=function(e,a){if(t.isValidDay(e,a)){if(t.dayList[7*e+a].date<t.min)return!0;if(t.dayList[7*e+a].date>t.max)return!0}return!1};var o=[];t.leaveCancelButton||o.push({text:'<i class="icon ion-close"></i>',type:"button-clear"}),o.push({text:t.todayText||"Today",onTap:function(e){var a=new Date,i=new Date(a),n=new Date(a);return i.setHours(0,0,0,0),n.setHours(24,0,0,-1),void 0!==t.min&&n<t.min?void e.preventDefault():void 0!==t.max&&i>t.max?void e.preventDefault():(t.highlightDate(a),void(t.value=a))}}),t.leaveOkButton||o.push({text:'<i class="icon ion-checkmark"></i>',type:"button-positive",onTap:function(){t.highlightDate(t.highlightedDate),t.value=t.highlightedDate}}),a.on("click",function(){r(i),t.datePickerPopup=e.show({templateUrl:"ionic-datepicker.template.html",cssClass:"ionic-datepicker",title:t.title||"<strong>Select a date</strong>",subTitle:"",scope:t,buttons:o})})}}}]),function(e){try{e=angular.module("ionic-datepicker.template")}catch(t){e=angular.module("ionic-datepicker.template",[])}e.run(["$templateCache",function(e){e.put("ionic-datepicker.template.html",'<div class=datepicker><div class="row monthSelector"><button class="col col-10 button-clear icon-left ion-chevron-left" ng-click=prevMonth()></button><div class="col col-80 text-center">{{ currentMonth }} &mdash; {{ currentYear }}</div><button class="col col-10 button-clear icon-right ion-chevron-right" ng-click=nextMonth()></button></div><div class=calendar><div class="row text-center weekDays"><div class=col ng-repeat="weekDay in weekDays track by $index"><abbr title="{{ weekDay }}">{{ weekDay | limitTo:1 }}</abbr></div></div><div class="row text-center" ng-repeat="row in calendarRows track by $index"><div class=col ng-repeat="col in calendarCols track by $index" ng-class="{ \'day\': isValidDay($parent.$index, $index), \'selected\': isSelected($parent.$index, $index), \'today\': isToday($parent.$index, $index), \'disabled\': isDisabled($parent.$index, $index) }" ng-click="highlightDate(dayList[$parent.$index * 7 + $index].date)">{{ dayList[$parent.$index * 7 + $index].day }}</div></div></div></div>')}])}();