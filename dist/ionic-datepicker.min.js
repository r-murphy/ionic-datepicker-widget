/*!
 * Created by Rajeshwar Patlolla https://github.com/rajeshwarpatlolla
 * Modified by Marko MarkoviÄ‡ <okram@civokram.com>
 * Modified by Sven Homburg <homburgs@gmail.com>
 *
 * @version 1.2.0
 */
"use strict";angular.module("ionic-datepicker",["ionic","ionic-datepicker.template"]).directive("ionicDatepicker",["$ionicPopup",function(e){return{restrict:"AE",replace:!0,scope:{value:"=",weekBeginsOnMonday:"=?",min:"=?",max:"=?",weekDayNames:"=?",monthNames:"=?",todayText:"=?",leaveCancelButton:"=?",leaveOkButton:"=?",stayOpenOnToday:"=?",title:"=?",onClose:"=?"},link:function(t,a){var n=angular.copy(t.value)||new Date;t.highlightedDate=angular.copy(n),t.weekDays=t.weekDayNames||["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],t.weekBeginsOnMonday&&t.weekDays.push(t.weekDays.shift());var i=t.monthNames||["January","February","March","April","May","June","July","August","September","October","November","December"];t.calendarRows=new Array(6),t.calendarCols=new Array(7);var o=function(e){t.dayList=[];for(var a=new Date(e.getFullYear(),e.getMonth(),1).getDate(),n=new Date(e.getFullYear(),e.getMonth()+1,0).getDate(),o=a;n>=o;o++){var r=new Date(e.getFullYear(),e.getMonth(),o);t.dayList.push({date:r,day:r.getDate()})}a=t.dayList[0].date.getDay(),t.weekBeginsOnMonday&&a--;for(var l=0;a>l;l++)t.dayList.unshift(void 0);t.currentMonth=i[e.getMonth()],t.currentYear=e.getFullYear()};t.prevMonth=function(){var e=new Date(n.getFullYear(),n.getMonth(),0);void 0!==t.min&&e<t.min||(n.setMonth(n.getMonth()-1),o(n))},t.nextMonth=function(){var e=new Date(n.getFullYear(),n.getMonth()+1,1);void 0!==t.max&&e>t.max||(n.setMonth(n.getMonth()+1),o(n))},t.highlightDate=function(e){if("undefined"!=typeof e){if(void 0!==t.min&&e<t.min)return;if(void 0!==t.max&&e>t.max)return;t.highlightedDate=angular.copy(e),n=e,o(n),t.leaveOkButton&&(t.value=t.highlightedDate,t.datePickerPopup.close())}},t.isValidDay=function(e,a){var n=t.dayList[7*e+a];return"undefined"!=typeof n},t.isSelected=function(e,a){if(t.isValidDay(e,a)){var n=t.dayList[7*e+a];return n.date.toDateString()===t.highlightedDate.toDateString()}return!1},t.isToday=function(e,a){return t.isValidDay(e,a)?t.dayList[7*e+a].date.toDateString()===(new Date).toDateString():!1},t.isDisabled=function(e,a){if(t.isValidDay(e,a)){if(t.dayList[7*e+a].date<t.min)return!0;if(t.dayList[7*e+a].date>t.max)return!0}return!1};var r=[];t.leaveCancelButton||r.push({text:'<i class="icon ion-close"></i>',type:"button-clear",onTap:function(){t.cancelled=!0}}),r.push({text:t.todayText||"Today",onTap:function(e){var a=new Date,n=new Date(a),i=new Date(a);return n.setHours(0,0,0,0),i.setHours(24,0,0,-1),void 0!==t.min&&i<t.min?void e.preventDefault():void 0!==t.max&&n>t.max?void e.preventDefault():(t.stayOpenOnToday&&e.preventDefault(),t.highlightDate(a),void(t.value=a))}}),t.leaveOkButton||r.push({text:'<i class="icon ion-checkmark"></i>',type:"button-positive",onTap:function(){t.highlightDate(t.highlightedDate),t.value=t.highlightedDate}}),a.on("click",function(){o(n),t.datePickerPopup=e.show({templateUrl:"ionic-datepicker.template.html",cssClass:"ionic-datepicker",title:t.title||"<strong>Select a date</strong>",subTitle:"",scope:t,buttons:r}),angular.isFunction(t.onClose)&&t.datePickerPopup.then(function(){t.onClose(t.cancelled?null:t.value)})})}}}]),function(e){try{e=angular.module("ionic-datepicker.template")}catch(t){e=angular.module("ionic-datepicker.template",[])}e.run(["$templateCache",function(e){e.put("ionic-datepicker.template.html",'<div class=datepicker><div class="row monthSelector"><button class="col col-10 button-clear icon-left ion-chevron-left" ng-click=prevMonth()></button><div class="col col-80 text-center">{{ currentMonth }} &mdash; {{ currentYear }}</div><button class="col col-10 button-clear icon-right ion-chevron-right" ng-click=nextMonth()></button></div><div class=calendar><div class="row text-center weekDays"><div class=col ng-repeat="weekDay in weekDays track by $index"><abbr title="{{ weekDay }}">{{ weekDay | limitTo:1 }}</abbr></div></div><div class="row text-center" ng-repeat="row in calendarRows track by $index"><div class=col ng-repeat="col in calendarCols track by $index" ng-class="{ \'day\': isValidDay($parent.$index, $index), \'selected\': isSelected($parent.$index, $index), \'today\': isToday($parent.$index, $index), \'disabled\': isDisabled($parent.$index, $index) }" ng-click="highlightDate(dayList[$parent.$index * 7 + $index].date)">{{ dayList[$parent.$index * 7 + $index].day }}</div></div></div></div>')}])}();